<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <type name="Magento\Customer\Controller\Plugin\Account">
        <arguments>
            <argument name="allowedActions" xsi:type="array">
                <item name="createAccount" xsi:type="string">createaccount</item>
            </argument>
        </arguments>
    </type>
    <type name="Magento\Store\Model\StoreSwitcherInterface">
        <plugin name="update_customer_language_after_switch_store_view"
                type="SM\Customer\Plugin\Store\StoreSwitcher" sortOrder="30" disabled="true"/>
    </type>

    <preference for="Magento\Customer\Model\Metadata\Form" type="SM\Customer\Model\Metadata\Form"/>
    <preference for="Trans\Customer\Block\Address\Edit" type="SM\Customer\Block\Address\Edit" />
    <preference for="Magento\Store\Controller\Store\SwitchAction" type="SM\Customer\Preference\SwitchAction"/>

    <type name="Magento\Store\Controller\Store\Redirect">
        <plugin name="sm_store_redirect"
                type="SM\Customer\Plugin\Store\Redirect" sortOrder="30"/>
    </type>

    <type name="Magento\Framework\App\Action\AbstractAction">
        <plugin name="customer_session_data_context"
                type="SM\Customer\Plugin\Magento\Framework\App\Action\AbstractAction"/>
    </type>
</config>
