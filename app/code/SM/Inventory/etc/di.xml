<?xml version="1.0"?>
<!--
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <type name="\Magento\InventoryReservationsApi\Model\GetReservationsQuantityInterface">
        <plugin name="sm_inventory_get_reservations_quantity"
                type="\SM\Inventory\Plugin\Api\GetReservationsQuantity" sortOrder="50"/>
    </type>
    <type name="Magento\InventoryApi\Api\SourceItemsSaveInterface">
        <plugin name="sm_source_items_save" type="\SM\Inventory\Plugin\Api\SourceItemsSave" sortOrder="50"/>
    </type>
    <type name="\Magento\InventoryApi\Api\SourceItemsDeleteInterface">
        <plugin name="sm_source_items_delete" type="SM\Inventory\Plugin\Api\SourceItemsSave" sortOrder="50"/>
    </type>
    <virtualType name="IsProductSalableForRequestedQtyConditionChainOnAddToCart">
        <arguments>
            <argument name="conditions" xsi:type="array">
                <item name="check_configurable_product_stock" xsi:type="array">
                    <item name="required" xsi:type="boolean">true</item>
                    <item name="object" xsi:type="object">
                        \SM\Inventory\Model\IsProductSalableForRequestedQtyCondition\ConfigurableProductCondition
                    </item>
                </item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="IsProductSalableForRequestedQtyConditionChainOnPlaceOrder">
        <arguments>
            <argument name="conditions" xsi:type="array">
                <item name="check_configurable_product_stock" xsi:type="array">
                    <item name="required" xsi:type="boolean">true</item>
                    <item name="object" xsi:type="object">
                        \SM\Inventory\Model\IsProductSalableForRequestedQtyCondition\ConfigurableProductCondition
                    </item>
                </item>
            </argument>
        </arguments>
    </virtualType>
    <type name="\Magento\InventorySalesApi\Api\PlaceReservationsForSalesEventInterface">
        <plugin name="sm_place_reservations_for_sale"
                type="\SM\Inventory\Plugin\Api\PlaceReservationsForSalesEvent" sortOrder="50" disabled="true"/>
    </type>
    <type name="\SM\Checkout\Model\Split">
        <plugin name="sm_configurable_stock" type="\SM\Inventory\Plugin\Model\Checkout\Split" sortOrder="50"/>
    </type>
    <!-- Append Reservations when Order Is Placed  -->
    <type name="Magento\Sales\Api\OrderManagementInterface">
        <plugin name="inventory_reservations_placement"
                type="\SM\Inventory\Plugin\Sales\OrderManagement\AppendReservationsAfterOrderPlacementPlugin"/>
    </type>
    <!-- End -->
</config>
